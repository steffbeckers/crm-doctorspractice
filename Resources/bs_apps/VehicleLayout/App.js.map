{"version":3,"sources":["bs_apps/VehicleLayout/App.js","bs_apps/VehicleLayout/App.ts"],"names":["__awaiter","thisArg","_arguments","P","generator","Promise","resolve","reject","fulfilled","value","step","next","e","rejected","throw","result","done","then","apply","BSS","Apps","VehicleLayout","AppViewModel","axles","ko","observableArray","currentRecordId","params","Xrm","Page","context","getQueryStringParameters","req","replace","toLowerCase","Data","RetrieveMultipleAsync","AddAxles","removeAll","onload","crmAxles","push","$","app","applyBindings"],"mappings":"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","file":"bs_apps/VehicleLayout/App.js","sourcesContent":["var __awaiter = (this && this.__awaiter) || function (thisArg, _arguments, P, generator) {\n    return new (P || (P = Promise))(function (resolve, reject) {\n        function fulfilled(value) { try { step(generator.next(value)); } catch (e) { reject(e); } }\n        function rejected(value) { try { step(generator.throw(value)); } catch (e) { reject(e); } }\n        function step(result) { result.done ? resolve(result.value) : new P(function (resolve) { resolve(result.value); }).then(fulfilled, rejected); }\n        step((generator = generator.apply(thisArg, _arguments)).next());\n    });\n};\nvar BSS;\n(function (BSS) {\n    var Apps;\n    (function (Apps) {\n        var VehicleLayout;\n        (function (VehicleLayout) {\n            class AppViewModel {\n                constructor() {\n                    this.axles = ko.observableArray();\n                    this.currentRecordId = null;\n                }\n                onload() {\n                    return __awaiter(this, void 0, void 0, function* () {\n                        var params = Xrm.Page.context.getQueryStringParameters();\n                        if (!params['id'])\n                            return;\n                        var req = \"bs_vehiclelayoutaxles?$orderby=bs_position&$filter=_bs_vehiclelayoutid_value eq \" + params['id'].replace(/[{}]/g, \"\").toLowerCase();\n                        var axles = yield BSS.Data.RetrieveMultipleAsync(req, [\n                            \"bs_code\",\n                            \"bs_numberoftyres\"]);\n                        this.AddAxles(axles);\n                    });\n                }\n                refresh() {\n                    return __awaiter(this, void 0, void 0, function* () {\n                        this.axles.removeAll();\n                        this.onload();\n                    });\n                }\n                AddAxles(crmAxles) {\n                    for (let e of crmAxles) {\n                        this.axles.push(e);\n                    }\n                }\n            }\n            VehicleLayout.AppViewModel = AppViewModel;\n        })(VehicleLayout = Apps.VehicleLayout || (Apps.VehicleLayout = {}));\n    })(Apps = BSS.Apps || (BSS.Apps = {}));\n})(BSS || (BSS = {}));\n// Activates knockout.js\n$(function () {\n    var app = new BSS.Apps.VehicleLayout.AppViewModel();\n    ko.applyBindings(app);\n    app.onload();\n});\n","namespace BSS.Apps.VehicleLayout\r\n{\r\n    export class AppViewModel\r\n    {\r\n        axles = ko.observableArray();\r\n        private currentRecordId: string = null;\r\n\r\n        public async onload()\r\n        {\r\n            var params = Xrm.Page.context.getQueryStringParameters();\r\n            if (!params['id']) return;\r\n\r\n            var req = \"bs_vehiclelayoutaxles?$orderby=bs_position&$filter=_bs_vehiclelayoutid_value eq \" + (<string>params['id']).replace(/[{}]/g, \"\").toLowerCase();\r\n\r\n            var axles = await BSS.Data.RetrieveMultipleAsync(req, [\r\n                \"bs_code\",\r\n                \"bs_numberoftyres\"]\r\n            );\r\n\r\n            this.AddAxles(axles);\r\n        }\r\n\r\n        public async refresh()\r\n        {\r\n            this.axles.removeAll();\r\n            this.onload();\r\n        }\r\n\r\n        AddAxles(crmAxles: Array<any>)\r\n        {\r\n            for (let e of crmAxles)\r\n            {\r\n                this.axles.push(e);\r\n            }\r\n        }\r\n    }\r\n}\r\n// Activates knockout.js\r\n$(function ()\r\n{\r\n    var app = new BSS.Apps.VehicleLayout.AppViewModel();\r\n    ko.applyBindings(app);\r\n    app.onload();\r\n});"],"sourceRoot":"/source/"}